{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Sachin singh/OneDrive/Desktop/BlogWebsite/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Sachin singh/OneDrive/Desktop/BlogWebsite/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Sachin singh/OneDrive/Desktop/BlogWebsite/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import PostsCard from'./PostsCard';import{useNavigate,useSearchParams}from'react-router-dom';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Post(){// This component is being shown at home page where we can see a all the Blogs.\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var searchCategory=searchParams.get('category');var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];// This function will fetch all the blogs from the database as soon as the page refreshed means at render.\nuseEffect(function(){var token=sessionStorage.getItem('accessToken');setLoading(true);var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(category){var url,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;url='https://blognewbackend.onrender.com/Blog/Post';if(category){url=\"https://blognewbackend.onrender.com/Blog/Post?category=\".concat(category);}_context.next=5;return fetch(url,{method:'GET',headers:{Authorization:token}});case 5:response=_context.sent;setLoading(false);_context.next=9;return response.json();case 9:data=_context.sent;if(data.status==='Success'){setPosts(data.post);// console.log(data)\n}_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 16:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}));return function fetchPosts(_x){return _ref.apply(this,arguments);};}();fetchPosts(searchCategory);// Fetch posts based on the category in the URL or fetch all posts.\n},[searchCategory]);// ---------------------------------------------SortBy-------------------------------------\nvar handleOnFilter=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(sortBy){var token,res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(sortBy);token=sessionStorage.getItem(\"accessToken\");_context2.next=5;return fetch(\"https://blognewbackend.onrender.com/Blog/Filter/\".concat(sortBy),{method:'GET',headers:{Authorization:token}});case 5:res=_context2.sent;_context2.next=8;return res.json();case 8:data=_context2.sent;// console.log(data);\nif(data.status===\"Success\"){setPosts(data.data);}_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,12]]);}));return function handleOnFilter(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"end\"},className:\"FilterBox  p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:\"Filter\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){handleOnFilter('asc');},style:{cursor:\"pointer\"},className:\"p-2 border\",children:\"Newest\"}),/*#__PURE__*/_jsx(\"li\",{onClick:function onClick(){handleOnFilter(\"desc\");},style:{cursor:\"pointer\"},className:\"p-2 border\",children:\"Oldest\"})]})]})}),posts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:posts.map(function(data,index){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Link,{to:\"postDetail/\".concat(data._id),children:/*#__PURE__*/_jsx(PostsCard,{data:data})})},index);})}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",textAlign:\"start\"},children:/*#__PURE__*/_jsx(\"h1\",{className:\"my-5\",children:\"No Current Blogs\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","PostsCard","useNavigate","useSearchParams","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Post","_useState","_useState2","_slicedToArray","posts","setPosts","_useSearchParams","_useSearchParams2","searchParams","searchCategory","get","navigate","_useState3","_useState4","loading","setLoading","token","sessionStorage","getItem","fetchPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","category","url","response","data","wrap","_callee$","_context","prev","next","concat","fetch","method","headers","Authorization","sent","json","status","post","t0","console","error","stop","_x","apply","arguments","handleOnFilter","_ref2","_callee2","sortBy","res","_callee2$","_context2","log","_x2","children","style","textAlign","className","type","onClick","cursor","length","map","index","to","_id","display","justifyContent"],"sources":["C:/Users/Sachin singh/OneDrive/Desktop/BlogWebsite/Frontend/src/Component/Blogs/Post.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport PostsCard from './PostsCard';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport default function Post() {\r\n\r\n  // This component is being shown at home page where we can see a all the Blogs.\r\n\r\n  const [posts, setPosts] = useState([]);\r\n  const [searchParams] = useSearchParams();\r\n  const searchCategory = searchParams.get('category');\r\n  const navigate = useNavigate()\r\n  const [loading , setLoading] = useState(false)\r\n\r\n\r\n  // This function will fetch all the blogs from the database as soon as the page refreshed means at render.\r\n  useEffect(() => {\r\n    const token = sessionStorage.getItem('accessToken');\r\n\r\n    setLoading(true)\r\n    const fetchPosts = async (category) => {\r\n      try {\r\n        let url = 'https://blognewbackend.onrender.com/Blog/Post';\r\n\r\n        if (category) {\r\n          url = `https://blognewbackend.onrender.com/Blog/Post?category=${category}`;\r\n        }\r\n\r\n        const response = await fetch(url, {\r\n          method: 'GET',\r\n          headers: {\r\n            Authorization: token,\r\n          },\r\n        });\r\n\r\n        setLoading(false)\r\n        const data = await response.json();\r\n\r\n\r\n\r\n        if (data.status === 'Success') {\r\n          setPosts(data.post);\r\n          // console.log(data)\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n\r\n    fetchPosts(searchCategory); // Fetch posts based on the category in the URL or fetch all posts.\r\n\r\n  }, [searchCategory ]);\r\n\r\n\r\n  // ---------------------------------------------SortBy-------------------------------------\r\n\r\n  const handleOnFilter = async (sortBy) => {\r\n    try {\r\n      console.log(sortBy);\r\n      const token = sessionStorage.getItem(\"accessToken\");\r\n      const res = await fetch(`https://blognewbackend.onrender.com/Blog/Filter/${sortBy}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          Authorization: token,\r\n        },\r\n      });\r\n  \r\n      const data = await res.json();\r\n      // console.log(data);\r\n  \r\n      if (data.status === \"Success\") {\r\n        setPosts(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <>\r\n\r\n    {/* Filter Box */}\r\n    <div style={{textAlign:\"end\"}} className=\"FilterBox  p-3\">\r\n\r\n    <div className=\"dropdown\">\r\n  <button className=\"btn btn-secondary dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n    Filter\r\n  </button>\r\n  <ul className=\"dropdown-menu\">\r\n    <li onClick={()=>{handleOnFilter('asc')}} style={{cursor:\"pointer\"}} className='p-2 border' >Newest</li>\r\n    <li  onClick={()=>{handleOnFilter(\"desc\")}} style={{cursor:\"pointer\"}} className='p-2 border' >Oldest</li>\r\n\r\n  </ul>\r\n</div>\r\n\r\n    </div>\r\n\r\n      {posts.length > 0 ? (\r\n        <div className=\"row\">\r\n          {posts.map((data, index) => (\r\n            <div className=\"col-md-4\" key={index}>\r\n              <Link to={`postDetail/${data._id}`}>\r\n                <PostsCard data={data} /> \r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div style={{ display: \"flex\", justifyContent: \"center\", textAlign: \"start\" }}>\r\n          <h1 className='my-5'>No Current Blogs</h1>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}